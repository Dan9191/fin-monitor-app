<div th:fragment="transactionsTable(transactionsPage, currentUri)">
    <table class="table" th:unless="${transactionsPage.empty}">
        <!-- Заголовок таблицы -->
        <thead>
        <tr>
            <th>Имя счета</th>
            <th>Тип счета</th>
            <th>Комментарий</th>
            <th>Категория</th>
            <th>Сумма</th>
            <th>Дата операции</th>
            <th>Статус</th>
            <th>Действия</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="transaction : ${transactionsPage}"
            th:class="${transaction.sum > 0 ? 'income' : 'expense'}"
            class="transaction-row">
            <td th:text="${transaction.bankAccount.accountName}"></td>
            <td th:text="${transaction.bankAccount.personType.name}"></td>
            <td th:text="${transaction.commentary} ?: 'Без комментария'"></td>
            <td th:text="${transaction.category.name}"></td>
            <td th:text="${transaction.sum > 0 ? '+' : ''} + ${#numbers.formatDecimal(transaction.sum, 1, 2)}"></td>
            <td th:text="${#temporals.format(transaction.createDate, 'dd.MM.yyyy HH:mm')}"></td>
            <!-- Добавил статус в список -->
            <td th:text="${transaction.operationStatus.name}"></td>
            <td>
                <!-- Кнопка с проверкой статусов -->
                <button type="button"
                        class="btn"
                        th:classappend="${transaction.operationStatus.name == 'Подтвержденная' or
                        transaction.operationStatus.name == 'В обработке' or
                        transaction.operationStatus.name == 'Отменена' or
                        transaction.operationStatus.name == 'Платеж выполнен' or
                        transaction.operationStatus.name == 'Возврат' or
                        transaction.operationStatus.name == 'Платеж удален'} ?
                        'btn-secondary disabled' : 'btn-danger'"
                        th:disabled="${transaction.operationStatus.name == 'Подтвержденная' or
                        transaction.operationStatus.name == 'В обработке' or
                        transaction.operationStatus.name == 'Отменена' or
                        transaction.operationStatus.name == 'Платеж выполнен' or
                        transaction.operationStatus.name == 'Возврат' or
                        transaction.operationStatus.name == 'Платеж удален'}"
                        th:attr="data-id=${transaction.id}"
                        onclick="deleteTransaction(this)">
                    Удалить
                </button>
            </td>
        </tr>
        </tbody>
    </table>

    <!-- Пагинация -->
    <div th:if="${transactionsPage.totalPages > 1}">
        <nav aria-label="Page navigation">
            <ul class="pagination">
                <!-- Первая страница -->
                <li class="page-item" th:classappend="${transactionsPage.first} ? 'disabled'">
                    <a class="page-link" th:href="@{${currentUri}(page=0)}">Первая</a>
                </li>

                <!-- Предыдущая страница -->
                <li class="page-item" th:classappend="${transactionsPage.first} ? 'disabled'">
                    <a class="page-link"
                       th:href="@{${currentUri}(page=${transactionsPage.number - 1})}">
                        Предыдущая
                    </a>
                </li>

                <!-- Номера страниц -->
                <li th:each="i : ${#numbers.sequence(0, transactionsPage.totalPages - 1)}"
                    class="page-item"
                    th:classappend="${i == transactionsPage.number} ? 'active'">
                    <a class="page-link"
                       th:href="@{${currentUri}(page=${i})}"
                       th:text="${i + 1}"></a>
                </li>

                <!-- Следующая страница -->
                <li class="page-item" th:classappend="${transactionsPage.last} ? 'disabled'">
                    <a class="page-link"
                       th:href="@{${currentUri}(page=${transactionsPage.number + 1})}">
                        Следующая
                    </a>
                </li>

                <!-- Последняя страница -->
                <li class="page-item" th:classappend="${transactionsPage.last} ? 'disabled'">
                    <a class="page-link"
                       th:href="@{${currentUri}(page=${transactionsPage.totalPages - 1})}">
                        Последняя
                    </a>
                </li>
            </ul>
        </nav>
    </div>
</div>